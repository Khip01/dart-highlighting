<span class="hljs-class"><span class="hljs-keyword">defmodule</span> <span class="hljs-title">User</span> <span class="hljs-title">do</span></span>
  <span class="hljs-keyword">defstruct</span> [<span class="hljs-symbol">:name</span>, <span class="hljs-symbol">:email</span>, <span class="hljs-symbol">age:</span> <span class="hljs-number">18</span>]
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">defprotocol</span> <span class="hljs-title">Size</span> <span class="hljs-title">do</span></span>
  <span class="hljs-variable">@doc</span> <span class="hljs-string">&quot;Calculates the size (and not the length!) of a data structure&quot;</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">size</span>(<span class="hljs-title">data</span>)
<span class="hljs-title">end</span>

<span class="hljs-title">defimpl</span> <span class="hljs-title">Size</span>, <span class="hljs-title">for</span>: <span class="hljs-title">Map</span> <span class="hljs-title">do</span>
  <span class="hljs-title">def</span> <span class="hljs-title">size</span>(<span class="hljs-title">map</span>), <span class="hljs-title">do</span>: <span class="hljs-title">map_size</span>(<span class="hljs-title">map</span>)
<span class="hljs-title">end</span>
</span>